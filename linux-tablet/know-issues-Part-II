

disable C-States and Turbo Mode in BIOS

xubuntu, lubuntu, ubuntu are out of the box,

--------------------------------------------------

write xubuntu into usb-sick, it won't detected by BIOS as bootable
so put bootia32.efi into EFI/BOOT/
then in BIOS -> Boot Manager -> USB Devices can boot from this usb stick


ubuntu 20.04 only release amd64 iso file, it require 4GB RAM and 32GB disk space
ubuntu use modesetting as default driver to instead of intel i915 driver,
and this benifit is proper icon and font display on a HiDPI screen,
also there's `ubuntu safe graphics` with is pass `nomodeset` to kernel parameter,
then font and icon will display very small on a HiDPI screen


--------------------------------------------------

you can change C-States in BIOS, intel baytrail c-state cause random freeze issue,
`intel_idle.max_cstate=1` is a solution as linux kernel parameter
but it can be disable or set c1 as max c-states in BIOS's power module
or just disable C-States, Power -> Advanced CPU Control -> C-States

Advanced -> Boot Configuration ->
PMIC Xpowers
Audio Realtek ALC5642
WiFi Realtek RGN RTL8723BS
Bluetooth
Rear Camera Lite-On 13P2BA829
Front Camera Lite-On 13P2SF221
ALS Sensor Capella CM32181
Accel/Compass Sensor Bosch BMC150

--------------------
running debian linux on android natively
https://medium.com/@quantvc/running-debian-on-android-device-natively-73545c9b0757
--------------------------------------
firefox, about:config, new string key "general.useragent.override" and value is "fuckyou"
this will visit website with desktop site
------------------------------------
open wifi first, then
pair RAPOO BLE KB in bluetooth, when it shows "connecting" then hold on Fn + 2 for 3 sec, it will be connected

or use `Bluetooth Pair` or `Bluetooth Scanner` apps, install from Google Play

and remember, r8723 contain bs and bt, wifi and bluetooth on one chip,
so when they don't work, just `rmmod r8723bs; modprobe r8723bs`
-----------------------------------
you need enable `enable native bridge` in settings for download some apps from Google Play
--------------------------------------------------
android-x86 8.1-r5, speaker and headphone jack both working at the same time,
use `alsa_amixer set Speaker 100 mute` to mute speaker
use `alsa_amixer set Speaker 100 unmute` to unmute speaker

or install alsamixer app on android

wifi reconnection fail issue, try `pkill wpa_supplicant` in chroot
or
in android emulator
su
rmmod r8723bs
modprobe r8723bs

toggle bluetooth may affect wifi 

/sdcard/mute.sh
/system/bin/alsa_amixer set Speaker 100 mute

#sh mute.sh

wifi.sh
rmmod r8723bs
modprobe r8723bs

#sh wifi.sh
-------------------------------------------------------------
turn bluetooth on, hold Fn + 2 on Rapoo keyboard for 3 sec, then connect, or reload r8723bs module
-------------------------------------------------------------
about sdcard, you may choose UHS card to instead of SDHC card, and make it as internal storage
---------------------------------------------------
mount -t vfat /dev/block/mmcblk1p1 /sdcard/debian #mount esp to change grub
add `androidboot.selinux=permissive intel_idle.max_cstate=1` in EFI/Android/android.cfg linux line
umount /sdcard/debian/
after reboot, dmesg|grep idle to check
---------------------------------------------------------------
(debian, buster i386)  (img, 512k 7500 ext4) (sdcard, vfat-8k bs)

#dd if=/dev/zero of=debian.img bs=4096k count=2000       # 8G
dd if=/dev/zero of=debian.img bs=512k count=7500       # 3.7G
mkfs -t ext4 debian.img

if your update your system without reboot,
then your running kernel may not be your installed kernel,
then you may fail to mount

sudo mount -o loop debian.img /mnt/
su
#debootstrap --arch amd64 --foreign sid /mnt/ http://mirrors.aliyun.com/debian 
debootstrap --arch i386 --foreign buster /mnt/ http://mirrors.tuna.tsinghua.edu.cn/debian
cd /mnt
chroot . /bin/bash
/debootstrap/debootstrap --second-stage 
exit
cd
umount /mnt

now you can pass you debian.img to android


df -h # show where your sdcard mount on, like /mnt/media_rw/0435-FB6C/
su
mkdir /sdcard/debian
cd /sdcard/debian
mount -o loop /mnt/media_rw/0435-FB6C/debian.img ./debian
cd debian
mount -o bind /dev ./dev
mount -t proc /proc ./proc
mount -t sysfs /sys ./sys
mount -t devpts /dev/pts ./dev/pts
mount -t tmpfs tmpfs ./tmp

put that to mount.sh

chroot . /bin/bash
vim source.me
#!/bin/bash
export PATH=/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin
export TERM=vt100
source source.me
passwd root
su root
cd
useradd -m john
passwd john

vi /etc/group
inet:x:3003:root
net_raw:x:3004:root

su root
ping 192.168.1.1

vi /etc/resolv.conf
nameserver 8.8.8.8

when you use outline vpn in android,
you can't get network in chroot

vi /etc/apt/source.list
deb http://mirrors.aliyun.com/debian sid main non-free contrib

chroot . /bin/su - root

chmod 777 /etc/resolv.conf   # this is important! otherwise you can ping repo server, but apt can't resolve it
usermod -g inet _apt
groups _apt # check if inet is the primary group for user _apt
# https://wiki.debian.org/ChrootOnAndroid
su root

apt update

click Google Play -> menu -> Settings -> Play Store version several times to update it to latest version, just like that enable developer options

MX Player can play movies on amd64 android, and also it can rotate the screen

rotate who android screen by a player, what a surprise!

https://github.com/phusion/baseimage-docker/issues/58
dpkg-reconfigure debconf

./mount.sh
chroot . /bin/bash
source ./source.me
source /root/.bashrc
su root
su john
/bin/bash
cd
source ./bashrc

./umount.sh
/system/bin/umount ./tmp
/system/bin/umount ./dev/pts
/system/bin/umount ./dev
/system/bin/umount ./proc
/system/bin/umount ./sys

--------------------------------------------
android x86   
solve that after sleep by power button, you can't get back

These are properties, not kernel cmdline.
You may add them to /system/build.prop. 
You can just set the property: sleep.state=none 

https://groups.google.com/forum/#!topic/Android-x86/CVbQm8lq4Fo
https://groups.google.com/forum/#!topic/android-x86/_vU8nNLKicI
https://groups.google.com/forum/#!topic/android-x86/OOdwiY9XRKU
